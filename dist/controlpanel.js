<<<<<<< HEAD
!function(e){function t(r){if(n[r])return n[r].exports;var a=n[r]={exports:{},id:r,loaded:!1};return e[r].call(a.exports,a,a.exports,t),a.loaded=!0,a.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var a=n(12),o=r(a);window.ControlPanel=o.default},function(e,t){"use strict";function n(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(){function e(){r(this,e)}return o(e,null,[{key:"b",value:function(e,t){return"boolean"==typeof e?e:t}},{key:"i",value:function(e,t){return Math.round("number"==typeof e?e:t)}},{key:"s",value:function(e,t){return"string"==typeof e?e:t}},{key:"f",value:function(e,t){return"number"==typeof e?e:t}},{key:"constrainValue",value:function(e,t,n){return e<t?t:e>n?n:e}},{key:"inside",value:function(e,t,n){return e>=t&&e<=n}},{key:"outside",value:function(e,t,n){return e<t||e>n}},{key:"mapValue",value:function(e,t,n,r,a){return r+(a-r)*((e-t)/(n-t))}},{key:"objectToString",value:function(e){var t="";return Object.keys(e).forEach(function(n){t=t+" "+n+":"+e[n]+";"}),t}},{key:"elementToObject",value:function(e){var t={};return[].forEach.call(e.attributes,function(e){t[e.name]=e.value}),t}},{key:"isObject",value:function(e){return e&&"object"===("undefined"==typeof e?"undefined":a(e))&&!Array.isArray(e)&&null!==e}},{key:"merge",value:function(e,t){var r=this,a=Object.assign({},e);return this.isObject(e)&&this.isObject(t)&&Object.keys(t).forEach(function(o){r.isObject(t[o])&&o in e?a[o]=r.merge(e[o],t[o]):Object.assign(a,n({},o,t[o]))}),a}}]),e}();t.default=i},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.setText=t.createCanvas=t.createChart=t.createTriangle=t.createInput=t.createCircle=t.createLabel=t.createRect=t.createElement=t.setAttributesFor=t.updateElementFor=t.buildElementsFor=t.buildController=void 0;var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(1),c=r(u),s=n(5),d=r(s),f=n(6),v=r(f),h=n(7),g=r(h),p=n(8),b=r(p),m=n(9),y=r(m),w=n(10),E=r(w),x=n(11),F=r(x),k=function(e){function t(e){return a(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return i(t,e),l(t,[{key:"init",value:function(e){var t=e.top,n=void 0===t?0:t,r=e.left,a=void 0===r?0:r,o=e.name,i=void 0===o?"?":o,l=e.position,u=void 0===l?"absolute":l,s=e.background,d=void 0===s?"rgba(0,0,0,0.25)":s,f={id:"cp5-"+i,class:"cp5",style:{top:n,left:a,position:u,background:d}},h=j(T("svg"),c.default.merge(f,e));return O("button",function(e,t){v.default.update(e,t)}),O("colorPicker",function(e,t){g.default.update(e,t)}),O("range",function(e,t){b.default.update(e,t)}),O("slider",function(e,t){y.default.update(e,t)}),O("textField",function(e,t){E.default.update(e,t)}),O("toggle",function(e,t){F.default.update(e,t)}),O("chart",function(e,t){Chart.update(e,t)}),h}}],[{key:"svgns",value:function(){return"http://www.w3.org/2000/svg"}}]),t}(d.default),_={},O=t.buildController=function(e,t){_[e]=t},j=(t.buildElementsFor=function(e,t){var n=e.type,r=c.default.merge(e.state,t),a=_[n](e,r);return a},t.updateElementFor=function(e,t,n,r){var a=r.text;void 0===e.getElement(t)&&(e.getElement()[t]=n(r),e.getElement().insertBefore(e.getElement(t),e.getElement("area"))),void 0!==a&&(C(e.getElement(t),a),delete r.text),j(e.getElement(t),r),console.log()},t.setAttributesFor=function(e,t){return Object.keys(t).forEach(function(n){e.setAttribute(n,c.default.isObject(t[n])?c.default.objectToString(t[n]):t[n])}),e}),T=t.createElement=function(e){return document.createElementNS(k.svgns(),e)},C=(t.createRect=function(e){var t=e.width,n=void 0===t?100:t,r=e.height,a=void 0===r?100:r,o=e.rx,i=void 0===o?0:o,l=e.ry,u=void 0===l?0:l,s={width:n,height:a,rx:i,ry:u},d=j(T("rect"),c.default.merge(s,e));return d},t.createLabel=function(e){var t=e.textAnchor,n=void 0===t?"start":t,r=e.alignmentBaseline,a=void 0===r?"central":r,o=e.text,i={"alignment-baseline":a,"text-anchor":n};delete e.text;var l=j(C(T("text"),o),c.default.merge(i,e));return l},t.createCircle=function(e){var t=e.r,n=void 0===t?20:t,r=e.cx,a=void 0===r?20:r,o=e.cy,i=void 0===o?20:o,l={r:n,cx:a,cy:i},u=j(T("circle"),c.default.merge(l,e));return u},t.createInput=function(e){var t=e.x,n=void 0===t?0:t,r=e.y,a=void 0===r?0:r,o=e.width,i=void 0===o?100:o,l=e.height,u=void 0===l?20:l,s={x:n,y:a,width:i,height:u};console.log("createInput",s);var d=j(T("foreignObject"),c.default.merge(s,e)),f=j(document.createElement("div"),{class:"single",xmlns:"http://www.w3.org/1999/xhtml"}),v=j(document.createElement("span"),{onblur:'this.setAttribute("contenteditable", false)',style:"font-size:20px; color:rgba(255,255,255,1); line-height: normal; height: "+u+"px",contenteditable:"false"});return f.appendChild(v),d.appendChild(f),d},t.createTriangle=function(e){},t.createChart=function(e){var t=T("svg");T("polyline");return t},t.createCanvas=function(e){},t.setText=function(e,t){return e.innerHTML=t,e});t.default=k},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.addEventListener=t.callEventFor=void 0;var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(1),s=r(c),d=n(5),f=r(d),v=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.dragTarget=void 0,n.viewTarget=void 0,n}return l(t,e),u(t,[{key:"configure",value:function(e,n){var r=this;if(void 0===this.viewTarget){this.viewTarget=document,b(window,t.resize,function(e){}),b(this.viewTarget,t.mouseMove,function(e){void 0!==r.dragTarget&&(r.dragTarget.params.event=e,r.apply(r.dragTarget.controller,"drag",r.dragTarget.params))}),b(this.viewTarget,t.mouseUp,function(e){r.apply(void 0!==r.dragTarget?r.dragTarget.controller:void 0,"stopDrag",{event:e})});var a=function(){return t.onWheel in r.viewTarget?t.wheel:t.mouseWheel};b(e,a(),function(e){e.preventDefault()}),b(this.viewTarget,t.touchStart,function(e){r.apply(void 0!==r.dragTarget?r.dragTarget.controller:void 0,"stopDrag",{event:e})},!0),b(e,t.touchMove,function(e){r.base().app.a=e.clientX,e.preventDefault()}),b(this.viewTarget,t.touchEnd,function(e){r.apply(void 0!==r.dragTarget?r.dragTarget.controller:void 0,"stopDrag",{event:e})})}}},{key:"set",value:function(e,t){return g(e,t),this}},{key:"get",value:function(e){return h[e]||function(){console.log("Event",e,"does not exist.")}}},{key:"apply",value:function(e,t,n){return h[t](this,e,n),this}},{key:"handleKeyEvent",value:function(e,t){var n=[].concat(a(document.querySelectorAll(":hover")));if(n.filter(function(e){return"svg"===e.nodeName}).filter(function(e){return e===theRoot}).length){var r=n.filter(function(e){return void 0!==e.request});r.length&&r.reduce(function(e){return e}).request().change({label:"hello"})}}}]),t}(f.default),h={},g=function(e,t){h[e]=t},p=t.callEventFor=function(e){return h[e]},b=t.addEventListener=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];e.addEventListener?e.addEventListener(t,n,r):e.attachEvent&&e.attachEvent("on"+t,n)};g("call",function(e,t,n){var r=n.fn;r(t,n)}),g("startDrag",function(e,t,n){e.dragTarget={controller:t,params:n}}),g("stopDrag",function(e,t,n){e.dragTarget=void 0}),g("drag",function(e,t,n){var r=n.then,a=n.get;n.inputValue=void 0!==a?n.event[a]:0,p(r)(e,t,n)}),g("preventDefault",function(e,t,n){var r=n.event;r.preventDefault()}),g("sliderDown",function(e,t,n){var r=n.event,a=n.element,o=t.state,i=o.min,l=o.max,u=o.width,c=r.clientX-a.area.getBoundingClientRect().left,d=s.default.mapValue(c,0,u,i,l),f=s.default.constrainValue(d,i,l);t.change({value:f})}),g("sliderDrag",function(e,t,n){var r=(n.event,n.inputValue),a=t.state,o=a.min,i=a.max,l=a.width,u=a.value,c=u+s.default.mapValue(r,0,l,0,i-o),d=s.default.constrainValue(c,o,i);t.change({value:d})}),g("rangeDown",function(e,t,n){var r=n.event,a=n.element,o=t.state,i=o.min,l=o.max,u=o.value,c=o.width,d=o.handleWidth,f=s.default.mapValue(u.min,i,l,d,c-d),v=s.default.mapValue(u.max,i,l,d,c-d),h=r.clientX-a.area.getBoundingClientRect().left,g=s.default.inside(h,f-d,f)?"left":s.default.inside(h,v,v+d)?"right":s.default.outside(h,f,v)?void 0:"center";e.dragTarget.applyTo=g}),g("rangeDrag",function(e,t,n){var r=(n.event,n.inputValue),a=t.state,o=a.width,i=a.min,l=a.max,u=a.value,c=u.max-u.min,d=s.default.mapValue(r,0,o,0,l-i),f=void 0===e.dragTarget?"scroll":e.dragTarget.applyTo;switch(f){case"center":case"scroll":var v=s.default.constrainValue(u.min+d,i,l-c),h=v+c;t.change({value:{min:v,max:h}});break;case"left":var g=s.default.constrainValue(u.min+d,i,u.max);t.change({value:{min:g}});break;case"right":var p=s.default.constrainValue(u.max+d,u.min,l);t.change({value:{max:p}})}}),g("hover",function(e,t,n){var r=n.is;t.change({hover:r})}),v.change="change",v.blur="blur",v.click="click",v.focus="focus",v.keyDown="keydown",v.keyPress="keypress",v.keyUp="keyup",v.mouseDown="mousedown",v.mouseEnter="mouseenter",v.mouseLeave="mouseleave",v.mouseMove="mousemove",v.mouseUp="mouseup",v.mouseWheel="mousewheel",v.onWheel="onwheel",v.resize="resize",v.touchEnd="touchend",v.touchMove="touchmove",v.touchStart="touchstart",v.wheel="wheel",t.default=v},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(1),l=r(i),u=n(3),c=n(2),s=function(){function e(t,n,r){var o=this;a(this,e);var i=t,l=n,u=r;this.id=i,this.type=l,this.state={},this.events=u,this.element=(0,c.setAttributesFor)((0,c.createElement)("g"),{type:l,id:i}),this.element.request=function(){return o},this.element.area=(0,c.setAttributesFor)((0,c.createElement)("rect"),{fill:"rgba(0,0,0,0)"}),this.element.appendChild(this.element.area)}return o(e,[{key:"getElement",value:function(e){return void 0===e?this.element:this.element[e]}},{key:"getEventHandler",value:function(){return this.events}},{key:"getValue",value:function(){return this.state.value}},{key:"getStateFor",value:function(e){return this.state[e]}},{key:"change",value:function(e){this.setState(e),this.build()}},{key:"setState",value:function(e){return this.state=l.default.merge(this.state,e),this}},{key:"removeStateFor",value:function(e){return delete this.state[e],console.log(this.state),this}},{key:"addEventFor",value:function(e,t){var n=this;return Object.keys(t).forEach(function(r){(0,u.addEventListener)(n.getElement("area"),e,function(e){var a=l.default.merge({},t[r]),o=a.element,i=a.event,c=a.get;a.element=void 0===o?n.getElement():n.getElement(o),a.event=void 0===i?e:getEvent(i),a.inputValue=void 0===c?0:e[c],(0,u.callEventFor)(r)(n.getEventHandler(),n,a)})}),this}},{key:"setParent",value:function(e){return e.appendChild(this.getElement()),this}},{key:"build",value:function(){var e=this.state,t=e.width,n=e.height,r=e.x,a=e.y;e.r;(0,c.setAttributesFor)(this.getElement(),{transform:"translate("+r+","+a+")",width:t,height:n}),(0,c.buildElementsFor)(this,this.state)}},{key:"print",value:function(){console.log(this.getElement(),this.state)}}]),e}();t.default=s},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(){function e(t){n(this,e),this.baseRef=t}return r(e,[{key:"base",value:function(){return this.baseRef}},{key:"builder",value:function(){return this.baseRef.builder}},{key:"events",value:function(){return this.baseRef.events}},{key:"properties",value:function(){return this.baseRef.properties}}]),e}();t.default=a},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(3),l=r(i),u=n(1),c=r(u),s=n(4),d=r(s),f=n(2),v=function(){function e(){a(this,e)}return o(e,null,[{key:"create",value:function(t,n,r){var a=r.value,o=void 0===a?1:a,i=r.x,u=void 0===i?0:i,s=r.y,d=void 0===s?0:s,v=r.r,h=void 0===v?0:v,g=r.width,p=void 0===g?100:g,b=r.height,m=void 0===b?20:b,y=t.createControllerFor(n,"button");return y.setState(c.default.merge({value:o,width:p,height:m,x:u,y:d,r:h},r)).addEventFor(l.default.click,{call:{fn:function(e){console.log("hello click",e)}}}).addEventFor(l.default.mouseDown,{call:{fn:function(t){(0,f.setAttributesFor)(t.getElement("bg"),{class:e.active})}}}).addEventFor(l.default.mouseUp,{call:{fn:function(t){(0,f.setAttributesFor)(t.getElement("bg"),{class:e.hover})}}}).addEventFor(l.default.mouseEnter,{hover:{is:!0}}).addEventFor(l.default.mouseLeave,{hover:{is:!1}}).setParent(t.root()).build(),y}},{key:"update",value:function(t,n){var r=n.width,a=n.height,o=n.label,i=n.hover,l=n.option,u=n.icon,c=n.rx,s=void 0===c?4:c,v=n.ry,h=void 0===v?4:v,g=i?e.hover:e.normal,p=r/2,b=a/2;switch((0,f.updateElementFor)(t,"bg",f.createRect,{width:r,height:a,class:g,rx:s,ry:h}),l){case"icon":(0,f.updateElementFor)(t,"icon",f.createLabel,{x:p,y:b,textAnchor:"middle",class:e.icon,text:u});break;default:(0,f.updateElementFor)(t,"label",f.createLabel,{x:p,y:b,textAnchor:"middle",class:e.label,text:o})}return(0,f.updateElementFor)(t,"area",f.createRect,{width:r,height:a,class:d.default.area}),t}}]),e}();v.normal="button bg",v.hover="button fg",v.active="button active",v.label="button label",v.icon="button icon",t.default=v},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(3),u=r(l),c=n(1),s=r(c),d=n(4),f=(r(d),n(2)),v=function(){function e(){o(this,e)}return i(e,null,[{key:"create",value:function(e,t,n){var r=n.value,o=void 0===r?1:r,i=n.x,c=void 0===i?0:i,d=n.y,v=void 0===d?0:d,h=n.r,g=void 0===h?0:h,p=n.width,b=void 0===p?100:p,m=n.height,y=void 0===m?20:m,w=e.createControllerFor(t,"colorPicker"),E=function(){var t="picker",n=w.getStateFor(t),r=e.root(),o=void 0;if(void 0===n){var i;!function(){var e=100,n=100,s=10,d=0,h=e-s,g=n-d,p=(0,f.setAttributesFor)((0,f.createElement)("foreignObject"),{width:e,height:n,x:c,y:v+y});o=(0,f.setAttributesFor)(document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),{width:e,height:n}),p.appendChild(o);var b=o.getContext("2d");b.beginPath(),b.rect(0,0,e,n),b.fillStyle="rgba(255,255,255,0.5)",b.fill(),b.beginPath(),b.rect(0,0,10,g);var m=b.createLinearGradient(0,0,0,g);m.addColorStop(0,"rgba(255, 0, 0, 1)"),m.addColorStop(.17,"rgba(255, 255, 0, 1)"),m.addColorStop(.34,"rgba(0, 255, 0, 1)"),m.addColorStop(.51,"rgba(0, 255, 255, 1)"),m.addColorStop(.68,"rgba(0, 0, 255, 1)"),m.addColorStop(.85,"rgba(255, 0, 255, 1)"),m.addColorStop(1,"rgba(255, 0, 0, 1)"),b.fillStyle=m,b.fill();var E="rgba(255,0,0,1)";b.fillStyle=E,b.fillRect(s,d,h,g);var x=b.createLinearGradient(s,d,h,d);x.addColorStop(0,"rgba(255,255,255,1)"),x.addColorStop(1,"rgba(255,255,255,0)"),b.fillStyle=x,b.fillRect(s,d,h,g),i=b.createLinearGradient(s,d,s,g),i.addColorStop(0,"rgba(0,0,0,0)"),i.addColorStop(1,"rgba(0,0,0,1)"),b.fillStyle=i,b.fillRect(s,d,h,g),b.getImageData(0,0,1,1).data,(0,l.addEventListener)(o,u.default.click,function(e){var t=b.getImageData(e.layerX,e.layerY,1,1).data,n="fill: rgba("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")";console.log(e,"Hello Color",t,(0,f.setAttributesFor)(w.getElement().childNodes[2],{style:n}))}),r.appendChild(p),w.setState(a({},t,p))}()}else r.removeChild(n),w.removeStateFor(t)};return w.setState(s.default.merge({value:o,width:b,height:y,x:c,y:v,r:g},n)).addEventFor(u.default.click,{call:{fn:E}}).addEventFor(u.default.mouseEnter,{hover:{is:!0}}).addEventFor(u.default.mouseLeave,{hover:{is:!1}}).setParent(e.root()).build(),w}},{key:"update",value:function(e,t){var n=t.width,r=t.height,a=t.label,o=t.hover,i=o?"colorPicker active":"colorPicker bg";return(0,f.updateElementFor)(e,"bg",f.createRect,{width:n,height:r,class:i}),(0,f.updateElementFor)(e,"label",f.createLabel,{x:n/2,y:r/2,textAnchor:"middle",class:"colorPicker label",text:a}),(0,f.updateElementFor)(e,"fg",f.createRect,{width:n,height:5,y:r-5}),(0,f.updateElementFor)(e,"area",f.createRect,{width:n,height:r,class:"area"}),e}}]),e}();t.default=v},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(3),l=r(i),u=n(1),c=r(u),s=n(4),d=r(s),f=n(2),v=function(){function e(){a(this,e)}return o(e,null,[{key:"create",value:function(e,t,n){var r=n.value,a=void 0===r?{min:.25,max:.75}:r,o=n.min,i=void 0===o?0:o,u=n.max,s=void 0===u?1:u,d=n.x,f=void 0===d?0:d,v=n.y,h=void 0===v?0:v,g=n.r,p=void 0===g?0:g,b=n.width,m=void 0===b?100:b,y=n.height,w=void 0===y?20:y,E=n.handleWidth,x=void 0===E?10:E,F=e.createControllerFor(t,"range");return F.setState(c.default.merge({value:a,min:i,max:s,width:m,height:w,handleWidth:x,x:f,y:h,r:p},n)).addEventFor(l.default.wheel,{rangeDrag:{get:"deltaY"}}).addEventFor(l.default.mouseDown,{startDrag:{then:"rangeDrag",get:"movementX"},rangeDown:{}}).addEventFor(l.default.mouseEnter,{hover:{is:!0}}).addEventFor(l.default.mouseLeave,{hover:{is:!1}}).setParent(e.root()).build(),F}},{key:"update",value:function(t,n){var r=n.width,a=n.height,o=n.label,i=n.value,l=n.min,u=n.max,s=n.hover,v=n.handleWidth,h=c.default.mapValue(i.min,l,u,v,r-v),g=c.default.mapValue(i.max,l,u,v,r-v),p=g-h,b=i.min.toFixed(2),m=i.max.toFixed(2),y=s?e.active:e.hover,w=4;return(0,f.updateElementFor)(t,"bg",f.createRect,{width:r,height:a,class:e.normal}),(0,f.updateElementFor)(t,"fg",f.createRect,{x:h,width:p,height:a,class:y}),(0,f.updateElementFor)(t,"min",f.createRect,{x:h-v,width:v,height:a,class:e.hover}),(0,f.updateElementFor)(t,"max",f.createRect,{x:g,width:v,height:a,class:e.hover}),(0,f.updateElementFor)(t,"label",f.createLabel,{x:r+w,y:a/2,"text-anchor":"start",class:e.label,text:o}),(0,f.updateElementFor)(t,"valueMin",f.createLabel,{x:w,y:a/2,"text-anchor":"start",class:e.label,text:b}),(0,f.updateElementFor)(t,"valueMax",f.createLabel,{x:r-w,y:a/2,"text-anchor":"end",class:e.label,text:m}),(0,f.updateElementFor)(t,"area",f.createRect,{width:r,height:a,class:d.default.area}),t}}]),e}();v.normal="range bg",v.hover="range fg",v.active="range active",v.label="range label",t.default=v},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(3),l=r(i),u=n(1),c=r(u),s=n(4),d=r(s),f=n(2),v=(r(f),function(){function e(){a(this,e)}return o(e,null,[{key:"create",value:function(e,t,n){var r=n.value,a=void 0===r?.5:r,o=n.min,i=void 0===o?0:o,u=n.max,s=void 0===u?1:u,d=n.x,f=void 0===d?0:d,v=n.y,h=void 0===v?0:v,g=n.r,p=void 0===g?0:g,b=n.width,m=void 0===b?100:b,y=n.height,w=void 0===y?20:y,E=e.createControllerFor(t,"slider");return E.setState(c.default.merge({value:a,min:i,max:s,width:m,height:w,x:f,y:h,r:p},n)).addEventFor(l.default.wheel,{sliderDrag:{get:"deltaY"}}).addEventFor(l.default.mouseDown,{startDrag:{then:"sliderDrag",get:"movementX"},sliderDown:{}}).addEventFor(l.default.mouseEnter,{hover:{is:!0}}).addEventFor(l.default.mouseLeave,{hover:{is:!1}}).setParent(e.root()).build(),E}},{key:"update",value:function(t,n){var r=n.width,a=n.height,o=n.label,i=n.min,l=n.max,u=n.value,s=n.hover,v=c.default.constrainValue(u,i,l),h=c.default.mapValue(v,i,l,0,r),g=v.toFixed(2),p=s?e.active:e.hover,b=4;return(0,f.updateElementFor)(t,"bg",f.createRect,{width:r,height:a,class:e.normal}),(0,f.updateElementFor)(t,"fg",f.createRect,{width:h,height:a,class:p}),(0,f.updateElementFor)(t,"label",f.createLabel,{x:r+b,y:a/2,"text-anchor":"start",class:e.label,text:o}),(0,f.updateElementFor)(t,"value",f.createLabel,{x:b,y:a/2,"text-anchor":"start",class:e.label,text:g}),(0,f.updateElementFor)(t,"area",f.createRect,{width:r,height:a,class:d.default.area}),t}}]),e}());v.normal="slider bg",v.hover="slider fg",v.active="slider active",v.label="slider label",v.icon="slider icon",t.default=v},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(3),l=r(i),u=n(1),c=r(u),s=n(4),d=r(s),f=n(2),v=function(){function e(){a(this,e)}return o(e,null,[{key:"create",value:function(e,t,n){var r=n.value,a=void 0===r?1:r,o=n.x,i=void 0===o?0:o,u=n.y,s=void 0===u?0:u,d=n.r,f=void 0===d?0:d,v=n.width,h=void 0===v?100:v,g=n.height,p=void 0===g?20:g,b=e.createControllerFor(t,"textField"),m=function(){var e=b.getElement("input").childNodes[0].childNodes[0];return e.setAttribute("contenteditable",!0),e.onkeypress=function(t){13===t.charCode&&e.blur(),console.log(e.innerHTML)},e};return b.setState(c.default.merge({value:a,width:h,height:p,x:i,y:s,r:f},n)).addEventFor(l.default.focus,{call:{fn:function(){m().focus()}}}).addEventFor(l.default.mouseEnter,{hover:{is:!0}}).addEventFor(l.default.mouseLeave,{hover:{is:!1}}).setParent(e.root()).build(),b}},{key:"update",value:function(t,n){var r=n.width,a=n.height,o=n.label,i=n.hover,l=n.rx,u=void 0===l?0:l,c=n.ry,s=void 0===c?0:c,v=i?e.active:e.hover;return(0,f.updateElementFor)(t,"bg",f.createRect,{width:r,height:a,class:e.normal,rx:u,ry:s}),(0,f.updateElementFor)(t,"baseline",f.createRect,{width:r,height:2,y:a-2,class:v,rx:u,ry:s}),(0,f.updateElementFor)(t,"input",f.createInput,{width:r,height:a,class:e.label}),(0,f.updateElementFor)(t,"label",f.createLabel,{x:r+4,y:a/2,textAnchor:"start",alignmentBaseline:"central",class:e.label,text:o}),(0,f.updateElementFor)(t,"area",f.createRect,{width:r,height:a,class:d.default.area}),t}}]),e}();v.normal="textField bg",v.hover="textField fg",v.active="textField active",v.label="textField label",t.default=v},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(3),l=r(i),u=n(1),c=r(u),s=n(4),d=r(s),f=n(2),v=function(){function e(){a(this,e)}return o(e,null,[{key:"create",value:function(e,t,n){var r=n.value,a=void 0!==r&&r,o=n.x,i=void 0===o?0:o,u=n.y,s=void 0===u?0:u,d=n.r,f=void 0===d?0:d,v=n.width,h=void 0===v?20:v,g=n.height,p=void 0===g?20:g,b=e.createControllerFor(t,"toggle");return b.setState(c.default.merge({value:a,width:h,height:p,x:i,y:s,r:f},n)).addEventFor(l.default.click,{call:{fn:function(e){e.change({value:!b.getValue()})}}}).addEventFor(l.default.focus,{call:{fn:function(e){e.change({focus:!0})}}}).addEventFor(l.default.blur,{call:{fn:function(e){e.change({focus:!1})}}}).setParent(e.root()).build(),b}},{key:"update",value:function(t,n){var r=n.value,a=n.width,o=n.height,i=n.label,l=void 0===i?"":i,u=n.option,c=n.rx,s=void 0===c?4:c,v=n.ry,h=void 0===v?4:v,g=n.icon,p=!0,b=r?e.active:e.normal;switch(u){case"block":(0,f.updateElementFor)(t,"bg",f.createRect,{width:a,height:o,class:e.normal}),(0,f.updateElementFor)(t,"fg",f.createRect,{x:r?a/2:0,width:a/2,height:o,class:b}),(0,f.updateElementFor)(t,"label",f.createLabel,{x:a+4,y:o/2,class:e.label,text:l});break;case"circular":var m=2,y=o/2,w=r?e.active:e.hover;(0,f.updateElementFor)(t,"bg",f.createRect,{rx:y,ry:y,width:a,height:o,class:e.normal}),(0,f.updateElementFor)(t,"fg",f.createCircle,{r:y-m,cx:r?a-y:y,cy:y,class:w}),(0,f.updateElementFor)(t,"label",f.createLabel,{x:a+4,y:o/2,class:e.label,text:l});break;case"icon":p=!1,(0,f.updateElementFor)(t,"bg",f.createRect,{rx:s,ry:h,width:a,height:o,class:b}),(0,f.updateElementFor)(t,"icon",f.createLabel,{x:a/2,y:o/2,textAnchor:"middle",class:e.icon,text:g});break;default:(0,f.updateElementFor)(t,"bg",f.createRect,{width:a,height:o,class:b})}return p&&(0,f.updateElementFor)(t,"label",f.createLabel,{x:a+4,y:o/2,class:e.label,text:l}),(0,f.updateElementFor)(t,"area",f.createRect,{width:a,height:o,class:d.default.area}),t}}]),e}();v.normal="toggle bg",v.hover="toggle fg",v.active="toggle active",v.label="toggle label",v.icon="toggle icon",t.default=v},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(2),l=r(i),u=n(1),c=r(u),s=n(3),d=r(s),f=n(13),v=r(f),h=n(15),g=r(h),p=n(14),b=r(p),m=function(){function e(t,n){a(this,e);var r=c.default.merge({name:"",width:400,height:300},n);this.app=t,this.name=r.name,this.styles=new b.default(this),this.builder=new l.default(this),this.observer=new v.default(this),this.events=new d.default(this),this.templates=new g.default(this),this.controllers={};var o=this.builder.init(r);document.body.appendChild(o),this.events.configure(o,this.name),this.templates.configure(o);var u=(0,i.setAttributesFor)(document.createElementNS("http://www.w3.org/2000/svg","circle"),{style:{fill:"rgba(255,255,255,0.5)"},cx:12,cy:12,r:8});u.value=!1,(0,s.addEventListener)(u,d.default.click,function(e){u.value=!u.value,(0,i.setAttributesFor)(o,{height:u.value?24:r.height})}),o.appendChild(u)}return o(e,[{key:"create",value:function(e,t){return this.controllers[e]=this.templates.create(e,t),console.log("created controller:",this.controllers[e],this.controllers),this}},{key:"change",value:function(e,t){var n=this.controllers[e];return n.change(t),this}},{key:"remove",value:function(e){return console.log("remove",theTarget,"removes theTarget and all children and observers accordingly."),this}},{key:"print",value:function(e){this.controllers[e].print()}}]),e}();t.default=m},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(1),l=r(i),u=function(){function e(){a(this,e),this.observer=new MutationObserver(function(e){e.map(function(e){switch(console.log(">",e.attributeName),e.attributeName){case"x":var t=l.default.i(100*Math.random(),0);e.target.setAttribute("transform","translate("+t+", 0)")}return e})}),this.config={attributes:!0,childList:!0,characterData:!0}}return o(e,[{key:"observe",value:function(e){this.observer.observe(e,this.config)}}]),e}();t.default=u},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function e(){n(this,e);var t=["libraries/assets/styles.css","http://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"];t.forEach(function(e){var t=document.createElement("link");t.rel="stylesheet",t.type="text/css",t.media="screen",t.href=e,document.getElementsByTagName("head")[0].appendChild(t)})};t.default=r},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function");
}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(5),c=r(u),s=n(4),d=r(s),f=n(6),v=r(f),h=n(7),g=r(h),p=n(8),b=r(p),m=n(9),y=r(m),w=n(10),E=r(w),x=n(11),F=r(x),k=function(e){function t(e){a(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.templates={},n.rootRef=void 0,n}return i(t,e),l(t,[{key:"create",value:function(e,t){var n=t.type;if(this.templates.hasOwnProperty(n))return this.templates[n](e,t)}},{key:"configure",value:function(e){var t=this;this.rootRef=e,this.setTemplateFor("button",function(e,n){return v.default.create(t,e,n)}),this.setTemplateFor("colorPicker",function(e,n){return g.default.create(t,e,n)}),this.setTemplateFor("range",function(e,n){return b.default.create(t,e,n)}),this.setTemplateFor("slider",function(e,n){return y.default.create(t,e,n)}),this.setTemplateFor("textField",function(e,n){return E.default.create(t,e,n)}),this.setTemplateFor("toggle",function(e,n){return F.default.create(t,e,n)})}},{key:"createControllerFor",value:function(e,t){var n=new d.default(e,t,this.events());return n}},{key:"setTemplateFor",value:function(e,t){return this.templates[e]=t,this}},{key:"root",value:function(){return this.rootRef}}]),t}(c.default);t.default=k}]);
=======
!function(e){function t(r){if(n[r])return n[r].exports;var a=n[r]={exports:{},id:r,loaded:!1};return e[r].call(a.exports,a,a.exports,t),a.loaded=!0,a.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var a=n(11),o=r(a);window.ControlPanel=o.default},function(e,t){"use strict";function n(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(){function e(){r(this,e)}return o(e,null,[{key:"b",value:function(e,t){return"boolean"==typeof e?e:t}},{key:"i",value:function(e,t){return Math.round("number"==typeof e?e:t)}},{key:"s",value:function(e,t){return"string"==typeof e?e:t}},{key:"f",value:function(e,t){return"number"==typeof e?e:t}},{key:"constrainValue",value:function(e,t,n){return e<t?t:e>n?n:e}},{key:"inside",value:function(e,t,n){return e>=t&&e<=n}},{key:"outside",value:function(e,t,n){return e<t||e>n}},{key:"mapValue",value:function(e,t,n,r,a){return r+(a-r)*((e-t)/(n-t))}},{key:"objectToString",value:function(e){var t="";return Object.keys(e).forEach(function(n){t=t+" "+n+":"+e[n]+";"}),t}},{key:"elementToObject",value:function(e){var t={};return[].forEach.call(e.attributes,function(e){t[e.name]=e.value}),t}},{key:"isObject",value:function(e){return e&&"object"===("undefined"==typeof e?"undefined":a(e))&&!Array.isArray(e)&&null!==e}},{key:"merge",value:function(e,t){var r=this,a=Object.assign({},e);return this.isObject(e)&&this.isObject(t)&&Object.keys(t).forEach(function(o){r.isObject(t[o])&&o in e?a[o]=r.merge(e[o],t[o]):Object.assign(a,n({},o,t[o]))}),a}}]),e}();t.default=i},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.setText=t.createCanvas=t.createChart=t.createTriangle=t.createInput=t.createCircle=t.createLabel=t.createRect=t.createElement=t.setAttributesFor=t.updateElementFor=t.buildElementsFor=t.buildController=void 0;var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(1),c=r(u),s=n(4),d=r(s),f=n(5),v=r(f),h=n(6),g=r(h),p=n(7),b=r(p),m=n(8),y=r(m),w=n(9),E=r(w),x=n(10),F=r(x),k=function(e){function t(e){return a(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return i(t,e),l(t,[{key:"init",value:function(e){var t=e.top,n=void 0===t?0:t,r=e.left,a=void 0===r?0:r,o=e.name,i=void 0===o?"?":o,l=e.position,u=void 0===l?"absolute":l,s=e.background,d=void 0===s?"rgba(0,0,0,0.25)":s,f={id:"cp5-"+i,class:"cp5",style:{top:n,left:a,position:u,background:d}},h=j(T("svg"),c.default.merge(f,e));return O("button",function(e,t){v.default.update(e,t)}),O("colorPicker",function(e,t){g.default.update(e,t)}),O("range",function(e,t){b.default.update(e,t)}),O("slider",function(e,t){y.default.update(e,t)}),O("textField",function(e,t){E.default.update(e,t)}),O("toggle",function(e,t){F.default.update(e,t)}),O("chart",function(e,t){Chart.update(e,t)}),h}}],[{key:"svgns",value:function(){return"http://www.w3.org/2000/svg"}}]),t}(d.default),_={},O=t.buildController=function(e,t){_[e]=t},j=(t.buildElementsFor=function(e,t){var n=e.type,r=c.default.merge(e.state,t),a=_[n](e,r);return a},t.updateElementFor=function(e,t,n,r){var a=r.text;void 0===e.getElement(t)&&(e.getElement()[t]=n(r),e.getElement().insertBefore(e.getElement(t),e.getElement("area"))),void 0!==a&&(C(e.getElement(t),a),delete r.text),j(e.getElement(t),r),console.log()},t.setAttributesFor=function(e,t){return Object.keys(t).forEach(function(n){e.setAttribute(n,c.default.isObject(t[n])?c.default.objectToString(t[n]):t[n])}),e}),T=t.createElement=function(e){return document.createElementNS(k.svgns(),e)},C=(t.createRect=function(e){var t=e.width,n=void 0===t?100:t,r=e.height,a=void 0===r?100:r,o=e.rx,i=void 0===o?0:o,l=e.ry,u=void 0===l?0:l,s={width:n,height:a,rx:i,ry:u},d=j(T("rect"),c.default.merge(s,e));return d},t.createLabel=function(e){var t=e.textAnchor,n=void 0===t?"start":t,r=e.alignmentBaseline,a=void 0===r?"central":r,o=e.text,i={"alignment-baseline":a,"text-anchor":n};delete e.text;var l=j(C(T("text"),o),c.default.merge(i,e));return l},t.createCircle=function(e){var t=e.r,n=void 0===t?20:t,r=e.cx,a=void 0===r?20:r,o=e.cy,i=void 0===o?20:o,l={r:n,cx:a,cy:i},u=j(T("circle"),c.default.merge(l,e));return u},t.createInput=function(e){var t=e.x,n=void 0===t?0:t,r=e.y,a=void 0===r?0:r,o=e.width,i=void 0===o?100:o,l=e.height,u=void 0===l?20:l,s={x:n,y:a,width:i,height:u};console.log("createInput",s);var d=j(T("foreignObject"),c.default.merge(s,e)),f=j(document.createElement("div"),{class:"single",xmlns:"http://www.w3.org/1999/xhtml"}),v=j(document.createElement("span"),{onblur:'this.setAttribute("contenteditable", false)',style:"font-size:20px; color:rgba(255,255,255,1); line-height: normal; height: "+u+"px",contenteditable:"false"});return f.appendChild(v),d.appendChild(f),d},t.createTriangle=function(e){},t.createChart=function(e){var t=T("svg");T("polyline");return t},t.createCanvas=function(e){},t.setText=function(e,t){return e.innerHTML=t,e});t.default=k},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.addEventListener=t.callEventFor=void 0;var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(1),s=r(c),d=n(4),f=r(d),v=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.dragTarget=void 0,n.viewTarget=void 0,n}return l(t,e),u(t,[{key:"configure",value:function(e,n){var r=this;if(void 0===this.viewTarget){this.viewTarget=document,b(window,t.resize,function(e){}),b(this.viewTarget,t.mouseMove,function(e){void 0!==r.dragTarget&&(r.dragTarget.params.event=e,r.apply(r.dragTarget.controller,"drag",r.dragTarget.params))}),b(this.viewTarget,t.mouseUp,function(e){r.apply(void 0!==r.dragTarget?r.dragTarget.controller:void 0,"stopDrag",{event:e})});var a=function(){return t.onWheel in r.viewTarget?t.wheel:t.mouseWheel};b(e,a(),function(e){e.preventDefault()}),b(this.viewTarget,t.touchStart,function(e){r.apply(void 0!==r.dragTarget?r.dragTarget.controller:void 0,"stopDrag",{event:e})},!0),b(e,t.touchMove,function(e){r.base().app.a=e.clientX,e.preventDefault()}),b(this.viewTarget,t.touchEnd,function(e){r.apply(void 0!==r.dragTarget?r.dragTarget.controller:void 0,"stopDrag",{event:e})})}}},{key:"set",value:function(e,t){return g(e,t),this}},{key:"get",value:function(e){return h[e]||function(){console.log("Event",e,"does not exist.")}}},{key:"apply",value:function(e,t,n){return h[t](this,e,n),this}},{key:"handleKeyEvent",value:function(e,t){var n=[].concat(a(document.querySelectorAll(":hover")));if(n.filter(function(e){return"svg"===e.nodeName}).filter(function(e){return e===theRoot}).length){var r=n.filter(function(e){return void 0!==e.request});r.length&&r.reduce(function(e){return e}).request().change({label:"hello"})}}}]),t}(f.default),h={},g=function(e,t){h[e]=t},p=t.callEventFor=function(e){return h[e]},b=t.addEventListener=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];e.addEventListener?e.addEventListener(t,n,r):e.attachEvent&&e.attachEvent("on"+t,n)};g("call",function(e,t,n){var r=n.fn;r(t,n)}),g("startDrag",function(e,t,n){e.dragTarget={controller:t,params:n}}),g("stopDrag",function(e,t,n){e.dragTarget=void 0}),g("drag",function(e,t,n){var r=n.then,a=n.get;n.inputValue=void 0!==a?n.event[a]:0,p(r)(e,t,n)}),g("preventDefault",function(e,t,n){var r=n.event;r.preventDefault()}),g("sliderDown",function(e,t,n){var r=n.event,a=n.element,o=t.state,i=o.min,l=o.max,u=o.width,c=r.clientX-a.area.getBoundingClientRect().left,d=s.default.mapValue(c,0,u,i,l),f=s.default.constrainValue(d,i,l);t.change({value:f})}),g("sliderDrag",function(e,t,n){var r=(n.event,n.inputValue),a=t.state,o=a.min,i=a.max,l=a.width,u=a.value,c=u+s.default.mapValue(r,0,l,0,i-o),d=s.default.constrainValue(c,o,i);t.change({value:d})}),g("rangeDown",function(e,t,n){var r=n.event,a=n.element,o=t.state,i=o.min,l=o.max,u=o.value,c=o.width,d=o.handleWidth,f=s.default.mapValue(u.min,i,l,d,c-d),v=s.default.mapValue(u.max,i,l,d,c-d),h=r.clientX-a.area.getBoundingClientRect().left,g=s.default.inside(h,f-d,f)?"left":s.default.inside(h,v,v+d)?"right":s.default.outside(h,f,v)?void 0:"center";e.dragTarget.applyTo=g}),g("rangeDrag",function(e,t,n){var r=(n.event,n.inputValue),a=t.state,o=a.width,i=a.min,l=a.max,u=a.value,c=u.max-u.min,d=s.default.mapValue(r,0,o,0,l-i),f=void 0===e.dragTarget?"scroll":e.dragTarget.applyTo;switch(f){case"center":case"scroll":var v=s.default.constrainValue(u.min+d,i,l-c),h=v+c;t.change({value:{min:v,max:h}});break;case"left":var g=s.default.constrainValue(u.min+d,i,u.max);t.change({value:{min:g}});break;case"right":var p=s.default.constrainValue(u.max+d,u.min,l);t.change({value:{max:p}})}}),g("hover",function(e,t,n){var r=n.is;t.change({hover:r})}),v.change="change",v.blur="blur",v.click="click",v.focus="focus",v.keyDown="keydown",v.keyPress="keypress",v.keyUp="keyup",v.mouseDown="mousedown",v.mouseEnter="mouseenter",v.mouseLeave="mouseleave",v.mouseMove="mousemove",v.mouseUp="mouseup",v.mouseWheel="mousewheel",v.onWheel="onwheel",v.resize="resize",v.touchEnd="touchend",v.touchMove="touchmove",v.touchStart="touchstart",v.wheel="wheel",t.default=v},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(){function e(t){n(this,e),this.baseRef=t}return r(e,[{key:"base",value:function(){return this.baseRef}},{key:"builder",value:function(){return this.baseRef.builder}},{key:"events",value:function(){return this.baseRef.events}},{key:"properties",value:function(){return this.baseRef.properties}}]),e}();t.default=a},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(3),l=r(i),u=n(1),c=r(u),s=n(12),d=r(s),f=n(2),v=function(){function e(){a(this,e)}return o(e,null,[{key:"create",value:function(t,n,r){var a=r.value,o=void 0===a?1:a,i=r.x,u=void 0===i?0:i,s=r.y,d=void 0===s?0:s,v=r.r,h=void 0===v?0:v,g=r.width,p=void 0===g?100:g,b=r.height,m=void 0===b?20:b,y=t.createControllerFor(n,"button");return y.setState(c.default.merge({value:o,width:p,height:m,x:u,y:d,r:h},r)).addEventFor(l.default.click,{call:{fn:function(e){console.log("hello click",e)}}}).addEventFor(l.default.mouseDown,{call:{fn:function(t){(0,f.setAttributesFor)(t.getElement("bg"),{class:e.active})}}}).addEventFor(l.default.mouseUp,{call:{fn:function(t){(0,f.setAttributesFor)(t.getElement("bg"),{class:e.hover})}}}).addEventFor(l.default.mouseEnter,{hover:{is:!0}}).addEventFor(l.default.mouseLeave,{hover:{is:!1}}).setParent(t.root()).build(),y}},{key:"update",value:function(t,n){var r=n.width,a=n.height,o=n.label,i=n.hover,l=n.option,u=n.icon,c=n.rx,s=void 0===c?4:c,v=n.ry,h=void 0===v?4:v,g=i?e.hover:e.normal,p=r/2,b=a/2;switch((0,f.updateElementFor)(t,"bg",f.createRect,{width:r,height:a,class:g,rx:s,ry:h}),l){case"icon":(0,f.updateElementFor)(t,"icon",f.createLabel,{x:p,y:b,textAnchor:"middle",class:e.icon,text:u});break;default:(0,f.updateElementFor)(t,"label",f.createLabel,{x:p,y:b,textAnchor:"middle",class:e.label,text:o})}return(0,f.updateElementFor)(t,"area",f.createRect,{width:r,height:a,class:d.default.area}),t}}]),e}();v.normal="button bg",v.hover="button fg",v.active="button active",v.label="button label",v.icon="button icon",t.default=v},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(3),u=r(l),c=n(1),s=r(c),d=n(12),f=(r(d),n(2)),v=function(){function e(){o(this,e)}return i(e,null,[{key:"create",value:function(e,t,n){var r=n.value,o=void 0===r?1:r,i=n.x,c=void 0===i?0:i,d=n.y,v=void 0===d?0:d,h=n.r,g=void 0===h?0:h,p=n.width,b=void 0===p?100:p,m=n.height,y=void 0===m?20:m,w=e.createControllerFor(t,"colorPicker"),E=function(){var t="picker",n=w.getStateFor(t),r=e.root(),o=void 0;if(void 0===n){var i;!function(){var e=100,n=100,s=10,d=0,h=e-s,g=n-d,p=(0,f.setAttributesFor)((0,f.createElement)("foreignObject"),{width:e,height:n,x:c,y:v+y});o=(0,f.setAttributesFor)(document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),{width:e,height:n}),p.appendChild(o);var b=o.getContext("2d");b.beginPath(),b.rect(0,0,e,n),b.fillStyle="rgba(255,255,255,0.5)",b.fill(),b.beginPath(),b.rect(0,0,10,g);var m=b.createLinearGradient(0,0,0,g);m.addColorStop(0,"rgba(255, 0, 0, 1)"),m.addColorStop(.17,"rgba(255, 255, 0, 1)"),m.addColorStop(.34,"rgba(0, 255, 0, 1)"),m.addColorStop(.51,"rgba(0, 255, 255, 1)"),m.addColorStop(.68,"rgba(0, 0, 255, 1)"),m.addColorStop(.85,"rgba(255, 0, 255, 1)"),m.addColorStop(1,"rgba(255, 0, 0, 1)"),b.fillStyle=m,b.fill();var E="rgba(255,0,0,1)";b.fillStyle=E,b.fillRect(s,d,h,g);var x=b.createLinearGradient(s,d,h,d);x.addColorStop(0,"rgba(255,255,255,1)"),x.addColorStop(1,"rgba(255,255,255,0)"),b.fillStyle=x,b.fillRect(s,d,h,g),i=b.createLinearGradient(s,d,s,g),i.addColorStop(0,"rgba(0,0,0,0)"),i.addColorStop(1,"rgba(0,0,0,1)"),b.fillStyle=i,b.fillRect(s,d,h,g),b.getImageData(0,0,1,1).data,(0,l.addEventListener)(o,u.default.click,function(e){var t=b.getImageData(e.layerX,e.layerY,1,1).data,n="fill: rgba("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")";console.log(e,"Hello Color",t,(0,f.setAttributesFor)(w.getElement().childNodes[2],{style:n}))}),r.appendChild(p),w.setState(a({},t,p))}()}else r.removeChild(n),w.removeStateFor(t)};return w.setState(s.default.merge({value:o,width:b,height:y,x:c,y:v,r:g},n)).addEventFor(u.default.click,{call:{fn:E}}).addEventFor(u.default.mouseEnter,{hover:{is:!0}}).addEventFor(u.default.mouseLeave,{hover:{is:!1}}).setParent(e.root()).build(),w}},{key:"update",value:function(e,t){var n=t.width,r=t.height,a=t.label,o=t.hover,i=o?"colorPicker active":"colorPicker bg";return(0,f.updateElementFor)(e,"bg",f.createRect,{width:n,height:r,class:i}),(0,f.updateElementFor)(e,"label",f.createLabel,{x:n/2,y:r/2,textAnchor:"middle",class:"colorPicker label",text:a}),(0,f.updateElementFor)(e,"fg",f.createRect,{width:n,height:5,y:r-5}),(0,f.updateElementFor)(e,"area",f.createRect,{width:n,height:r,class:"area"}),e}}]),e}();t.default=v},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(3),l=r(i),u=n(1),c=r(u),s=n(12),d=r(s),f=n(2),v=function(){function e(){a(this,e)}return o(e,null,[{key:"create",value:function(e,t,n){var r=n.value,a=void 0===r?{min:.25,max:.75}:r,o=n.min,i=void 0===o?0:o,u=n.max,s=void 0===u?1:u,d=n.x,f=void 0===d?0:d,v=n.y,h=void 0===v?0:v,g=n.r,p=void 0===g?0:g,b=n.width,m=void 0===b?100:b,y=n.height,w=void 0===y?20:y,E=n.handleWidth,x=void 0===E?10:E,F=e.createControllerFor(t,"range");return F.setState(c.default.merge({value:a,min:i,max:s,width:m,height:w,handleWidth:x,x:f,y:h,r:p},n)).addEventFor(l.default.wheel,{rangeDrag:{get:"deltaY"}}).addEventFor(l.default.mouseDown,{startDrag:{then:"rangeDrag",get:"movementX"},rangeDown:{}}).addEventFor(l.default.mouseEnter,{hover:{is:!0}}).addEventFor(l.default.mouseLeave,{hover:{is:!1}}).setParent(e.root()).build(),F}},{key:"update",value:function(t,n){var r=n.width,a=n.height,o=n.label,i=n.value,l=n.min,u=n.max,s=n.hover,v=n.handleWidth,h=c.default.mapValue(i.min,l,u,v,r-v),g=c.default.mapValue(i.max,l,u,v,r-v),p=g-h,b=i.min.toFixed(2),m=i.max.toFixed(2),y=s?e.active:e.hover,w=4;return(0,f.updateElementFor)(t,"bg",f.createRect,{width:r,height:a,class:e.normal}),(0,f.updateElementFor)(t,"fg",f.createRect,{x:h,width:p,height:a,class:y}),(0,f.updateElementFor)(t,"min",f.createRect,{x:h-v,width:v,height:a,class:e.hover}),(0,f.updateElementFor)(t,"max",f.createRect,{x:g,width:v,height:a,class:e.hover}),(0,f.updateElementFor)(t,"label",f.createLabel,{x:r+w,y:a/2,"text-anchor":"start",class:e.label,text:o}),(0,f.updateElementFor)(t,"valueMin",f.createLabel,{x:w,y:a/2,"text-anchor":"start",class:e.label,text:b}),(0,f.updateElementFor)(t,"valueMax",f.createLabel,{x:r-w,y:a/2,"text-anchor":"end",class:e.label,text:m}),(0,f.updateElementFor)(t,"area",f.createRect,{width:r,height:a,class:d.default.area}),t}}]),e}();v.normal="range bg",v.hover="range fg",v.active="range active",v.label="range label",t.default=v},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(3),l=r(i),u=n(1),c=r(u),s=n(12),d=r(s),f=n(2),v=(r(f),function(){function e(){a(this,e)}return o(e,null,[{key:"create",value:function(e,t,n){var r=n.value,a=void 0===r?.5:r,o=n.min,i=void 0===o?0:o,u=n.max,s=void 0===u?1:u,d=n.x,f=void 0===d?0:d,v=n.y,h=void 0===v?0:v,g=n.r,p=void 0===g?0:g,b=n.width,m=void 0===b?100:b,y=n.height,w=void 0===y?20:y,E=e.createControllerFor(t,"slider");return E.setState(c.default.merge({value:a,min:i,max:s,width:m,height:w,x:f,y:h,r:p},n)).addEventFor(l.default.wheel,{sliderDrag:{get:"deltaY"}}).addEventFor(l.default.mouseDown,{startDrag:{then:"sliderDrag",get:"movementX"},sliderDown:{}}).addEventFor(l.default.mouseEnter,{hover:{is:!0}}).addEventFor(l.default.mouseLeave,{hover:{is:!1}}).setParent(e.root()).build(),E}},{key:"update",value:function(t,n){var r=n.width,a=n.height,o=n.label,i=n.min,l=n.max,u=n.value,s=n.hover,v=c.default.constrainValue(u,i,l),h=c.default.mapValue(v,i,l,0,r),g=v.toFixed(2),p=s?e.active:e.hover,b=4;return(0,f.updateElementFor)(t,"bg",f.createRect,{width:r,height:a,class:e.normal}),(0,f.updateElementFor)(t,"fg",f.createRect,{width:h,height:a,class:p}),(0,f.updateElementFor)(t,"label",f.createLabel,{x:r+b,y:a/2,"text-anchor":"start",class:e.label,text:o}),(0,f.updateElementFor)(t,"value",f.createLabel,{x:b,y:a/2,"text-anchor":"start",class:e.label,text:g}),(0,f.updateElementFor)(t,"area",f.createRect,{width:r,height:a,class:d.default.area}),t}}]),e}());v.normal="slider bg",v.hover="slider fg",v.active="slider active",v.label="slider label",v.icon="slider icon",t.default=v},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(3),l=r(i),u=n(1),c=r(u),s=n(12),d=r(s),f=n(2),v=function(){function e(){a(this,e)}return o(e,null,[{key:"create",value:function(e,t,n){var r=n.value,a=void 0===r?1:r,o=n.x,i=void 0===o?0:o,u=n.y,s=void 0===u?0:u,d=n.r,f=void 0===d?0:d,v=n.width,h=void 0===v?100:v,g=n.height,p=void 0===g?20:g,b=e.createControllerFor(t,"textField"),m=function(){var e=b.getElement("input").childNodes[0].childNodes[0];return e.setAttribute("contenteditable",!0),e.onkeypress=function(t){13===t.charCode&&e.blur(),console.log(e.innerHTML)},e};return b.setState(c.default.merge({value:a,width:h,height:p,x:i,y:s,r:f},n)).addEventFor(l.default.focus,{call:{fn:function(){m().focus()}}}).addEventFor(l.default.mouseEnter,{hover:{is:!0}}).addEventFor(l.default.mouseLeave,{hover:{is:!1}}).setParent(e.root()).build(),b}},{key:"update",value:function(t,n){var r=n.width,a=n.height,o=n.label,i=n.hover,l=n.rx,u=void 0===l?0:l,c=n.ry,s=void 0===c?0:c,v=i?e.active:e.hover;return(0,f.updateElementFor)(t,"bg",f.createRect,{width:r,height:a,class:e.normal,rx:u,ry:s}),(0,f.updateElementFor)(t,"baseline",f.createRect,{width:r,height:2,y:a-2,class:v,rx:u,ry:s}),(0,f.updateElementFor)(t,"input",f.createInput,{width:r,height:a,class:e.label}),(0,f.updateElementFor)(t,"label",f.createLabel,{x:r+4,y:a/2,textAnchor:"start",alignmentBaseline:"central",class:e.label,text:o}),(0,f.updateElementFor)(t,"area",f.createRect,{width:r,height:a,class:d.default.area}),t}}]),e}();v.normal="textField bg",v.hover="textField fg",v.active="textField active",v.label="textField label",t.default=v},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(3),l=r(i),u=n(1),c=r(u),s=n(12),d=r(s),f=n(2),v=function(){function e(){a(this,e)}return o(e,null,[{key:"create",value:function(e,t,n){var r=n.value,a=void 0!==r&&r,o=n.x,i=void 0===o?0:o,u=n.y,s=void 0===u?0:u,d=n.r,f=void 0===d?0:d,v=n.width,h=void 0===v?20:v,g=n.height,p=void 0===g?20:g,b=e.createControllerFor(t,"toggle");return b.setState(c.default.merge({value:a,width:h,height:p,x:i,y:s,r:f},n)).addEventFor(l.default.click,{call:{fn:function(e){e.change({value:!b.getValue()})}}}).addEventFor(l.default.focus,{call:{fn:function(e){e.change({focus:!0})}}}).addEventFor(l.default.blur,{call:{fn:function(e){e.change({focus:!1})}}}).setParent(e.root()).build(),b}},{key:"update",value:function(t,n){var r=n.value,a=n.width,o=n.height,i=n.label,l=void 0===i?"":i,u=n.option,c=n.rx,s=void 0===c?4:c,v=n.ry,h=void 0===v?4:v,g=n.icon,p=!0,b=r?e.active:e.normal;switch(u){case"block":(0,f.updateElementFor)(t,"bg",f.createRect,{width:a,height:o,class:e.normal}),(0,f.updateElementFor)(t,"fg",f.createRect,{x:r?a/2:0,width:a/2,height:o,class:b}),(0,f.updateElementFor)(t,"label",f.createLabel,{x:a+4,y:o/2,class:e.label,text:l});break;case"circular":var m=2,y=o/2,w=r?e.active:e.hover;(0,f.updateElementFor)(t,"bg",f.createRect,{rx:y,ry:y,width:a,height:o,class:e.normal}),(0,f.updateElementFor)(t,"fg",f.createCircle,{r:y-m,cx:r?a-y:y,cy:y,class:w}),(0,f.updateElementFor)(t,"label",f.createLabel,{x:a+4,y:o/2,class:e.label,text:l});break;case"icon":p=!1,(0,f.updateElementFor)(t,"bg",f.createRect,{rx:s,ry:h,width:a,height:o,class:b}),(0,f.updateElementFor)(t,"icon",f.createLabel,{x:a/2,y:o/2,textAnchor:"middle",class:e.icon,text:g});break;default:(0,f.updateElementFor)(t,"bg",f.createRect,{width:a,height:o,class:b})}return p&&(0,f.updateElementFor)(t,"label",f.createLabel,{x:a+4,y:o/2,class:e.label,text:l}),(0,f.updateElementFor)(t,"area",f.createRect,{width:a,height:o,class:d.default.area}),t}}]),e}();v.normal="toggle bg",v.hover="toggle fg",v.active="toggle active",v.label="toggle label",v.icon="toggle icon",t.default=v},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(2),l=r(i),u=n(1),c=r(u),s=n(3),d=r(s),f=n(13),v=r(f),h=n(15),g=r(h),p=n(14),b=r(p),m=function(){function e(t,n){a(this,e);var r=c.default.merge({name:"",width:400,height:300},n);this.app=t,this.name=r.name,this.styles=new b.default(this),this.builder=new l.default(this),this.observer=new v.default(this),this.events=new d.default(this),this.templates=new g.default(this),this.controllers={};var o=this.builder.init(r);document.body.appendChild(o),this.events.configure(o,this.name),this.templates.configure(o);var u=(0,i.setAttributesFor)(document.createElementNS("http://www.w3.org/2000/svg","circle"),{style:{fill:"rgba(255,255,255,0.5)"},cx:12,cy:12,r:8});u.value=!1,(0,s.addEventListener)(u,d.default.click,function(e){u.value=!u.value,(0,i.setAttributesFor)(o,{height:u.value?24:r.height})}),o.appendChild(u)}return o(e,[{key:"create",value:function(e,t){return this.controllers[e]=this.templates.create(e,t),console.log("created controller:",this.controllers[e],this.controllers),this}},{key:"change",value:function(e,t){var n=this.controllers[e];return n.change(t),this}},{key:"remove",value:function(e){return console.log("remove",theTarget,"removes theTarget and all children and observers accordingly."),this}},{key:"print",value:function(e){this.controllers[e].print()}}]),e}();t.default=m},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(1),l=r(i),u=n(3),c=n(2),s=function(){function e(t,n,r){var o=this;a(this,e);var i=t,l=n,u=r;this.id=i,this.type=l,this.state={},this.events=u,this.element=(0,c.setAttributesFor)((0,c.createElement)("g"),{type:l,id:i}),this.element.request=function(){return o},this.element.area=(0,c.setAttributesFor)((0,c.createElement)("rect"),{fill:"rgba(0,0,0,0)"}),this.element.appendChild(this.element.area)}return o(e,[{key:"getElement",value:function(e){return void 0===e?this.element:this.element[e]}},{key:"getEventHandler",value:function(){return this.events}},{key:"getValue",value:function(){return this.state.value}},{key:"getStateFor",value:function(e){return this.state[e]}},{key:"change",value:function(e){this.setState(e),this.build()}},{key:"setState",value:function(e){return this.state=l.default.merge(this.state,e),this}},{key:"removeStateFor",value:function(e){return delete this.state[e],console.log(this.state),this}},{key:"addEventFor",value:function(e,t){var n=this;return Object.keys(t).forEach(function(r){(0,u.addEventListener)(n.getElement("area"),e,function(e){var a=l.default.merge({},t[r]),o=a.element,i=a.event,c=a.get;a.element=void 0===o?n.getElement():n.getElement(o),a.event=void 0===i?e:getEvent(i),a.inputValue=void 0===c?0:e[c],(0,u.callEventFor)(r)(n.getEventHandler(),n,a)})}),this}},{key:"setParent",value:function(e){return e.appendChild(this.getElement()),this}},{key:"build",value:function(){var e=this.state,t=e.width,n=e.height,r=e.x,a=e.y;e.r;(0,c.setAttributesFor)(this.getElement(),{transform:"translate("+r+","+a+")",width:t,height:n}),(0,c.buildElementsFor)(this,this.state)}},{key:"print",value:function(){console.log(this.getElement(),this.state)}}]),e}();t.default=s},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(1),l=r(i),u=function(){function e(){a(this,e),this.observer=new MutationObserver(function(e){e.map(function(e){switch(console.log(">",e.attributeName),e.attributeName){case"x":var t=l.default.i(100*Math.random(),0);e.target.setAttribute("transform","translate("+t+", 0)")}return e})}),this.config={attributes:!0,childList:!0,characterData:!0}}return o(e,[{key:"observe",value:function(e){this.observer.observe(e,this.config)}}]),e}();t.default=u},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function e(){n(this,e);var t=["libraries/assets/styles.css","http://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"];t.forEach(function(e){var t=document.createElement("link");t.rel="stylesheet",t.type="text/css",t.media="screen",t.href=e,document.getElementsByTagName("head")[0].appendChild(t)})};t.default=r},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function");
}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(4),c=r(u),s=n(12),d=r(s),f=n(5),v=r(f),h=n(6),g=r(h),p=n(7),b=r(p),m=n(8),y=r(m),w=n(9),E=r(w),x=n(10),F=r(x),k=function(e){function t(e){a(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.templates={},n.rootRef=void 0,n}return i(t,e),l(t,[{key:"create",value:function(e,t){var n=t.type;if(this.templates.hasOwnProperty(n))return this.templates[n](e,t)}},{key:"configure",value:function(e){var t=this;this.rootRef=e,this.setTemplateFor("button",function(e,n){return v.default.create(t,e,n)}),this.setTemplateFor("colorPicker",function(e,n){return g.default.create(t,e,n)}),this.setTemplateFor("range",function(e,n){return b.default.create(t,e,n)}),this.setTemplateFor("slider",function(e,n){return y.default.create(t,e,n)}),this.setTemplateFor("textField",function(e,n){return E.default.create(t,e,n)}),this.setTemplateFor("toggle",function(e,n){return F.default.create(t,e,n)})}},{key:"createControllerFor",value:function(e,t){var n=new d.default(e,t,this.events());return n}},{key:"setTemplateFor",value:function(e,t){return this.templates[e]=t,this}},{key:"root",value:function(){return this.rootRef}}]),t}(c.default);t.default=k}]);
>>>>>>> origin/dev
